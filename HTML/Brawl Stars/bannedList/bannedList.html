<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
<head>

    <style>
        body {
            margin: 0px;
        }

        .url {
            width: 100%;
        }
        #iframeBans {
            width: 100%;
            height: 650px;
        }
    </style>
</head>

<body onload="generateUrl();">
    <div>
        Casa:
        <select id="selCasa" onchange="generateUrl()"></select>

        Ban 1:
        <select id="selCasaBan1" onchange="generateUrl()"></select>

        Ban 2:
        <select id="selCasaBan2" onchange="generateUrl()"></select>
    </div>
    <div>
        Visitante:
        <select id="selVisitante" onchange="generateUrl()"></select>

        Ban 1:
        <select id="selVisitanteBan1" onchange="generateUrl()"></select>

        Ban 2:
        <select id="selVisitanteBan2" onchange="generateUrl()"></select>
    </div>
    <div>
        <input type="text" id="txtUrl" class="url" />
    </div>
    <br/>
    <div>
        <iframe id="iframeBans" src=""></iframe>
    </div>
    <script src="../common/brawlers/js/brawlers.js"></script>
    <script>
        teamSelectIds = ["selCasa", "selVisitante"]
        banSelectIds = ["selCasaBan1", "selCasaBan2", "selVisitanteBan1", "selVisitanteBan2"]
        brawlers = [{name: "Selecione", image: ""}].concat(jsonBrawlers);

        function generateUrl() {
            selCasa = document.getElementById("selCasa").value;
            selVisitante = document.getElementById("selVisitante").value;
            selCasaBan1 = document.getElementById("selCasaBan1").value;
            selCasaBan2 = document.getElementById("selCasaBan2").value;
            selVisitanteBan1 = document.getElementById("selVisitanteBan1").value;
            selVisitanteBan2 = document.getElementById("selVisitanteBan2").value;
            txtUrl = document.getElementById("txtUrl");
            subDirectory = window.document.location.href.substr(0, window.document.location.href.lastIndexOf("/") + 1);
            txtUrl.value = subDirectory + "bannedListIFRAME.html" +
                "?timeCasa=" + selCasa +
                "&timeVisitante=" + selVisitante +
                "&casaBan1=" + selCasaBan1 +
                "&casaBan2=" + selCasaBan2 +
                "&visitanteBan1=" + selVisitanteBan1 +
                "&visitanteBan2=" + selVisitanteBan2;

            document.getElementById("iframeBans").src = txtUrl.value;
        }

        document.addEventListener('readystatechange', event => { 
            // When HTML/DOM elements are ready:
            if (event.target.readyState === "interactive") {   //does same as:  ..addEventListener("DOMContentLoaded"..
                load(teamSelectIds, teams);
                load(banSelectIds, brawlers);
            }
        });

        
        function load(selectIds, json) {
            for (i = 0; i < selectIds.length; i++) {
                var select = document.getElementById(selectIds[i]);

                for (j = 0; j < json.length; j++) {
                    var option = document.createElement("option");
                    option.text = json[j].name;
                    option.value = json[j].image;

                    select.add(option);
                }
            }
        }

        // JSON
        const teams = [
            { "name": "Selecione", "image": "", },
            { "name": "4K TEAM GAMING", "image": "4K TEAM GAMING.png", },
            { "name": "BANANA CLUB", "image": "BANANA CLUB.png", },
            { "name": "CLÃ HOZURA", "image": "CLÃ HOZURA.png", },
            { "name": "ELITE GROUP", "image": "ELITE GROUP.png", },
            { "name": "GAME OVER", "image": "GAME OVER.png", },
            { "name": "LOS BROTHERS", "image": "LOS BROTHERS.png", },
            { "name": "NUCLEAR GAMING", "image": "NUCLEAR GAMING.png", },
        ]

        
    </script>
</body>

</html>